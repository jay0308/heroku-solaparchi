(this.webpackJsonpsolaparchidhap=this.webpackJsonpsolaparchidhap||[]).push([[0],{20:function(e,t,a){},44:function(e,t,a){e.exports=a(97)},49:function(e,t,a){},66:function(e,t,a){e.exports=a.p+"static/media/logo.25bf045c.svg"},94:function(e,t){},97:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(42),c=a.n(s),l=(a(49),a(4)),o=a(5),i=a(7),m=a(6),u=a(8),d=(a(20),a(9)),p=a.n(d),f=(a(66),a(43)),h=a.n(f),g=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).sendRequestToPlayer=function(e){a.props.socket.emit("playerRequest",{from:JSON.parse(localStorage.getItem("userDetail")).email,to:e})},a.selectCard=function(e,t){a.setState({selectCardInd:t,selectCardTxt:e})},a.sendCard=function(){a.props.socket.emit("userMove",{email:JSON.parse(localStorage.getItem("userDetail")).email,cardTxt:a.state.selectCardTxt,cardIndex:a.state.selectCardInd})},a.renderActiveUserCard=function(e){return r.a.createElement("div",{className:"activeUsrCard"},r.a.createElement("span",{className:"usrName"},"Let's play with ",r.a.createElement("br",null)," ",r.a.createElement("b",null,e)),r.a.createElement("button",{onClick:function(){a.sendRequestToPlayer(e)}},"Send Request"))},a.renderActiveUsers=function(){var e=a.props.activeUsers;return r.a.createElement("div",{className:"activeUsers"},e&&e.map((function(e){return a.renderActiveUserCard(e)})))},a.renderGamePanel=function(){var e=a.props,t=e.playersInGame,n=e.gameTurn;return r.a.createElement("div",{className:"gamePanel"},r.a.createElement("div",{className:"playersInGame"},r.a.createElement("h2",null,"Players in game"),t&&t.map((function(e,t){return r.a.createElement("span",null,r.a.createElement("span",null,e.email),n&&r.a.createElement("span",{className:"next"},n.next===e.email?"Next":""),n&&r.a.createElement("span",{className:"turn"},n.turn===e.email?"Turn":""))}))),r.a.createElement("div",{className:"cards"},r.a.createElement("h2",null,"Your Cards"),t&&t.map((function(e){if(e.email===JSON.parse(localStorage.getItem("userDetail")).email)return e.cards.map((function(e,t){return r.a.createElement("div",{className:"gameCard "+(a.state.selectCardInd===t?"selected":""),onClick:function(){a.selectCard(e,t)}},e)}))}))),n&&n.turn===JSON.parse(localStorage.getItem("userDetail")).email&&r.a.createElement("div",{className:"sendCard"},r.a.createElement("button",{className:"send-card-btn",onClick:a.sendCard},"Send Card")))},a.state={selectCardTxt:"",selectCardInd:""},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"playground"},this.props.startGame?this.renderGamePanel():this.renderActiveUsers())}}]),t}(r.a.Component),v=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).setOnlineUsers=function(e){var t=JSON.parse(localStorage.getItem("userDetail")).email,n=[];e.map((function(e){t!==e.email&&n.push(e.email)})),a.setState({onlineUsers:n})},a.sendMsg=function(){a.refs.chatTxtBox.value&&a.socket.emit("newMessage",JSON.parse(localStorage.getItem("userDetail")).email+" says : "+a.refs.chatTxtBox.value),a.refs.chatTxtBox.value=""},a.setTab=function(e){a.setState({activeTab:e})},a.openCnfrmModal=function(){a.setState({showConfrmModal:!0})},a.closeCnfrmModal=function(){a.setState({showConfrmModal:!1})},a.acceptRequest=function(){var e={acceptId:JSON.parse(localStorage.getItem("userDetail")).email,requestId:a.state.requestData.from};a.socket.emit("acceptRequest",e),a.closeCnfrmModal()},a.rejectRequest=function(){var e={rejectId:JSON.parse(localStorage.getItem("userDetail")).email,requestId:a.state.requestData.from};a.socket.emit("rejectRequest",e),a.closeCnfrmModal()},a.renderLoginScreen=function(){return r.a.createElement("div",{className:"loginScreen"},r.a.createElement("div",{className:"loginScreenInner"},r.a.createElement("input",{type:"text",placeholder:"Your Email",ref:"email"}),r.a.createElement("button",{className:"getInBtn",onClick:a.addUser},"Get In")))},a.renderAfterLogin=function(){var e=JSON.parse(localStorage.getItem("userDetail")).email;return r.a.createElement("div",{className:"welcome-user"},r.a.createElement("h2",null,"welcome ",e))},a.renderOnlineUsers=function(){return r.a.createElement("div",{className:"onlineUsers"},a.state.onlineUsers.map((function(e){return r.a.createElement("div",{className:"userList",key:e},e)})))},a.renderChatWindow=function(){return r.a.createElement("div",{className:"chatWindow"},r.a.createElement("div",{className:"chatBox"},a.state.chatText.map((function(e,t){return r.a.createElement("div",{key:t},e)}))),r.a.createElement("div",{className:"chatAction"},r.a.createElement("input",{type:"text",ref:"chatTxtBox"}),r.a.createElement("button",{onClick:a.sendMsg},"send")))},a.renderTabs=function(){return r.a.createElement("div",{className:"tabCont"},r.a.createElement("span",{className:"tab "+(0===a.state.activeTab?"active":""),onClick:function(){a.setTab(0)}},"Chat"),r.a.createElement("span",{className:"tab "+(1===a.state.activeTab?"active":""),onClick:function(){a.setTab(1)}},"Active"),r.a.createElement("span",{className:"tab "+(2===a.state.activeTab?"active":""),onClick:function(){a.setTab(2)}},"Playground"))},a.renderCnfrmModal=function(){return r.a.createElement("div",{className:"cnfrmModal"},r.a.createElement("div",{className:"cnfrmModalInner"},r.a.createElement("div",{className:"modal-body"},r.a.createElement("b",null,a.state.requestData.from)," ",r.a.createElement("br",null)," has requested to play"),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{className:"accept-btn",onClick:a.acceptRequest},"Accept"),r.a.createElement("button",{className:"ignore-btn",onClick:a.rejectRequest},"Ignore"))))},a.state={isUserLoggedin:!!localStorage.getItem("userDetail"),onlineUsers:null,chatText:[],activeTab:0,showConfrmModal:!1,requestData:null,isStartGame:!1,playersInGame:null,gameTurn:null},a.socket=h()("http://localhost:4000?email="+JSON.parse(localStorage.getItem("userDetail")).email.replace("@","*")),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.socket.on("connect",(function(){console.log("You are connected")})),this.socket.on("connectedUser",(function(t){console.log(t),e.setOnlineUsers(t)})),this.socket.on("serverMsg",(function(t){var a=e.state.chatText;a.push(t),e.setState({chatText:a}),console.log(t)})),this.socket.on("playingRequest_"+JSON.parse(localStorage.getItem("userDetail")).email,(function(t){console.log("playing req",t),e.setState({requestData:t}),e.openCnfrmModal()})),this.socket.on("acceptRequest_"+JSON.parse(localStorage.getItem("userDetail")).email,(function(e){console.log("acceptRequest_",e),e.error?alert(e.error):alert("accepted by "+e.acceptId)})),this.socket.on("rejectRequest_"+JSON.parse(localStorage.getItem("userDetail")).email,(function(e){console.log("rejectRequest_",e),alert("rejected by "+e.rejectId)})),this.socket.on("startGame_"+JSON.parse(localStorage.getItem("userDetail")).email,(function(t){console.log("startGame_",t),e.setState({isStartGame:!0,playersInGame:t})})),this.socket.on("gameTurn",(function(t){console.log("GameTurn",t),e.setState({gameTurn:t,playersInGame:t.players})})),this.socket.on("playerWin",(function(e){alert(e+" win")}))}},{key:"componentWillUnmount",value:function(){this.socket.close()}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},this.state.isUserLoggedin?this.renderAfterLogin():this.renderLoginScreen(),this.renderTabs(),0===this.state.activeTab&&this.renderChatWindow(),1===this.state.activeTab&&this.renderOnlineUsers(),2===this.state.activeTab&&r.a.createElement(g,{socket:this.socket,activeUsers:this.state.onlineUsers,startGame:this.state.isStartGame,playersInGame:this.state.playersInGame,gameTurn:this.state.gameTurn}),this.state.showConfrmModal&&this.renderCnfrmModal())}}]),t}(r.a.Component),E=function(e){var t="http://localhost:4000"+e.url;return"get"===e.method.toLowerCase()?p()({method:e.method,url:t}):"post"===e.method.toLowerCase()?p()({method:e.method,url:t,data:e.data}):void 0},S=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).addUser=function(){if(a.refs.email.value){var e={method:"post",url:"/api/adduser",data:{email:a.refs.email.value}};E(e).then((function(e){localStorage.setItem("userDetail",JSON.stringify(e.data)),a.setState({isUserLoggedin:!0})})).catch((function(e){alert(e.toString())}))}else alert("PLease enter email")},a.renderLoginScreen=function(){return r.a.createElement("div",{className:"loginScreen"},r.a.createElement("div",{className:"loginScreenInner"},r.a.createElement("input",{type:"text",placeholder:"Your Email",ref:"email"}),r.a.createElement("button",{className:"getInBtn",onClick:a.addUser},"Get In")))},a.state={isUserLoggedin:!!localStorage.getItem("userDetail")},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},this.state.isUserLoggedin?r.a.createElement(v,null):this.renderLoginScreen())}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[44,1,2]]]);
//# sourceMappingURL=main.c184cb71.chunk.js.map